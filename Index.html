<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sistema de Funcion√°rios - WMOLDES</title>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { getDatabase, ref, onValue, push, update, remove } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCBYhDq9AFP5LH_sSXUCCg8xLnTihtRBcI",
            authDomain: "lista-funcionariosmmc.firebaseapp.com",
            databaseURL: "https://lista-funcionariosmmc-default-rtdb.firebaseio.com",
            projectId: "lista-funcionariosmmc",
            storageBucket: "lista-funcionariosmmc.firebasestorage.app",
            messagingSenderId: "249740902307",
            appId: "1:249740902307:web:4664282a020725571be416"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        
        // Make database available globally
        window.firebaseDatabase = database;
        window.firebaseRef = ref;
        window.firebaseOnValue = onValue;
        window.firebasePush = push;
        window.firebaseUpdate = update;
        window.firebaseRemove = remove;
    </script>

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Modal de Login Admin -->
    <div id="admin-login-modal" class="modal">
        <div class="modal-content admin-modal">
            <span class="close-modal" onclick="fecharModalLogin()">&times;</span>
            <h2>üîê Acesso Administrativo</h2>
            <div class="login-form">
                <input type="password" id="admin-password" placeholder="Digite a senha de administrador" class="login-input">
                <button onclick="verificarSenhaAdmin()" class="login-btn">Acessar</button>
                <p id="login-error" class="error-message"></p>
            </div>
        </div>
    </div>

    <!-- Modal de Edi√ß√£o/Cria√ß√£o de Funcion√°rio -->
    <div id="funcionario-modal" class="modal">
        <div class="modal-content large-modal">
            <span class="close-modal" onclick="fecharModalFuncionario()">&times;</span>
            <h2 id="modal-title">üìù Adicionar Novo Funcion√°rio</h2>
            <div class="form-container">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-nome">Nome Completo *</label>
                        <input type="text" id="edit-nome" class="form-input" placeholder="Digite o nome completo">
                    </div>
                    <div class="form-group">
                        <label for="edit-drt">DRT *</label>
                        <input type="text" id="edit-drt" class="form-input" placeholder="N√∫mero da DRT">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-funcao">Fun√ß√£o *</label>
                        <select id="edit-funcao" class="form-select">
                            <option value="">Selecione a fun√ß√£o</option>
                            <option value="Lider">Lider</option>
                            <option value="Ajustador">Ajustador</option>
                            <option value="Ajustador/Soldador">Ajustador/Soldador</option>
                            <option value="Polidor">Polidor</option>
                            <option value="Carregador/Foscador">Carregador/Foscador</option>
                            <option value="Vertech">Vertech</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-turno">Turno *</label>
                        <select id="edit-turno" class="form-select">
                            <option value="">Selecione o turno</option>
                            <option value="Manh√£">Manh√£</option>
                            <option value="Tarde">Tarde</option>
                            <option value="Noite">Noite</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-turma">Turma/Folga *</label>
                        <select id="edit-turma" class="form-select">
                            <option value="">Selecione a turma</option>
                            <option value="A1">A1</option>
                            <option value="A2">A2</option>
                            <option value="A3">A3</option>
                            <option value="A4">A4</option>
                            <option value="B1">B1</option>
                            <option value="B2">B2</option>
                            <option value="B3">B3</option>
                            <option value="B4">B4</option>
                            <option value="C1">C1</option>
                            <option value="C2">C2</option>
                            <option value="C3">C3</option>
                            <option value="C4">C4</option>
                            <option value="Diaria">Di√°ria</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-ferias">F√©rias</label>
                        <select id="edit-ferias" class="form-select">
                            <option value="">N√£o informado</option>
                            <option value="JANEIRO/2024">JANEIRO/2024</option>
                            <option value="FEVEREIRO/2024">FEVEREIRO/2024</option>
                            <option value="MAR√áO/2024">MAR√áO/2024</option>
                            <option value="ABRIL/2024">ABRIL/2024</option>
                            <option value="MAIO/2024">MAIO/2024</option>
                            <option value="JUNHO/2024">JUNHO/2024</option>
                            <option value="JULHO/2024">JULHO/2024</option>
                            <option value="AGOSTO/2024">AGOSTO/2024</option>
                            <option value="SETEMBRO/2024">SETEMBRO/2024</option>
                            <option value="OUTUBRO/2024">OUTUBRO/2024</option>
                            <option value="NOVEMBRO/2024">NOVEMBRO/2024</option>
                            <option value="DEZEMBRO/2024">DEZEMBRO/2024</option>
                            <option value="JANEIRO/2025">JANEIRO/2025</option>
                            <option value="FEVEREIRO/2025">FEVEREIRO/2025</option>
                            <option value="MAR√áO/2025">MAR√áO/2025</option>
                            <option value="ABRIL/2025">ABRIL/2025</option>
                            <option value="MAIO/2025">MAIO/2025</option>
                            <option value="JUNHO/2025">JUNHO/2025</option>
                            <option value="JULHO/2025">JULHO/2025</option>
                            <option value="AGOSTO/2025">AGOSTO/2025</option>
                            <option value="SETEMBRO/2025">SETEMBRO/2025</option>
                            <option value="OUTUBRO/2025">OUTUBRO/2025</option>
                            <option value="NOVEMBRO/2025">NOVEMBRO/2025</option>
                            <option value="DEZEMBRO/2025">DEZEMBRO/2025</option>
                            <option value="JANEIRO/2026">JANEIRO/2026</option>
                            <option value="FEVEREIRO/2026">FEVEREIRO/2026</option>
                            <option value="MAR√áO/2026">MAR√áO/2026</option>
                            <option value="ABRIL/2026">ABRIL/2026</option>
                            <option value="MAIO/2026">MAIO/2026</option>
                            <option value="JUNHO/2026">JUNHO/2026</option>
                            <option value="JULHO/2026">JULHO/2026</option>
                            <option value="AGOSTO/2026">AGOSTO/2026</option>
                            <option value="SETEMBRO/2026">SETEMBRO/2026</option>
                            <option value="OUTUBRO/2026">OUTUBRO/2026</option>
                            <option value="NOVEMBRO/2026">NOVEMBRO/2026</option>
                            <option value="DEZEMBRO/2026">DEZEMBRO/2026</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-telefone">Telefone *</label>
                        <input type="text" id="edit-telefone" class="form-input" placeholder="(11) 99999-9999">
                    </div>
                    <div class="form-group">
                        <label for="edit-admissao">Data de Admiss√£o</label>
                        <input type="date" id="edit-admissao" class="form-input">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="edit-foto">URL da Foto (Opcional)</label>
                        <input type="text" id="edit-foto" class="form-input" placeholder="https://exemplo.com/foto.jpg">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="fecharModalFuncionario()" class="btn btn-cancel">Cancelar</button>
                    <button type="button" onclick="salvarFuncionario()" class="btn btn-success" id="salvar-funcionario">Salvar Funcion√°rio</button>
                    <button type="button" onclick="excluirFuncionario()" class="btn btn-danger" id="excluir-funcionario" style="display: none;">Excluir Funcion√°rio</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bot√£o de Fechar -->
    <button id="closeButton">X</button>
    
    <!-- Bot√£o de Tela Cheia -->
    <button id="fullscreen-btn">Tela cheia</button>

    <!-- Header com o T√≠tulo e Subt√≠tulo -->
    <div class="header-container">
        <h1 class="title">WMOLDES</h1>
        <h2 class="subtitle">Sistema de Gest√£o de Funcion√°rios - Manuten√ß√£o Corretiva</h2>
    </div>

    <!-- Controles Administrativos -->
    <div class="admin-controls" id="admin-controls" style="display: none;">
        <button class="admin-btn btn-primary" onclick="abrirModalNovoFuncionario()">
            <span class="btn-icon">‚ûï</span> Novo Funcion√°rio
        </button>
        <button class="admin-btn btn-secondary" onclick="exportarDados()">
            <span class="btn-icon">üìä</span> Exportar Dados
        </button>
        <button class="admin-btn btn-warning" onclick="sairModoAdmin()">
            <span class="btn-icon">üö™</span> Sair do Modo Admin
        </button>
    </div>

    <!-- Bot√£o de Acesso Admin -->
    <div class="admin-access" id="admin-access">
        <button class="admin-btn btn-admin" onclick="abrirModalLogin()">
            <span class="btn-icon">üîê</span> Acesso Administrativo
        </button>
    </div>

    <!-- Dashboard de Estat√≠sticas -->
    <div class="dashboard-stats">
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-info">
                <h3>Total de Funcion√°rios</h3>
                <span class="stat-number" id="total-funcionarios">0</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üèñÔ∏è</div>
            <div class="stat-info">
                <h3>F√©rias Este M√™s</h3>
                <span class="stat-number" id="ferias-mes-atual">0</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üìÖ</div>
            <div class="stat-info">
                <h3>Pr√≥ximas F√©rias</h3>
                <span class="stat-number" id="proximas-ferias">0</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚ö†Ô∏è</div>
            <div class="stat-info">
                <h3>F√©rias Atrasadas</h3>
                <span class="stat-number" id="ferias-atrasadas">0</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">üåÖ</div>
            <div class="stat-info">
                <h3>Turno Manh√£</h3>
                <span class="stat-number" id="total-manha">0</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">üåá</div>
            <div class="stat-info">
                <h3>Turno Tarde</h3>
                <span class="stat-number" id="total-tarde">0</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">üåÉ</div>
            <div class="stat-info">
                <h3>Turno Noite</h3>
                <span class="stat-number" id="total-noite">0</span>
            </div>
        </div>
    </div>

    <!-- Filtros Avan√ßados -->
    <div class="filters-container">
        <div class="filter-group">
            <label for="filter-turno">Turno:</label>
            <select id="filter-turno" onchange="aplicarFiltros()">
                <option value="todos">Todos os Turnos</option>
                <option value="Manh√£">Manh√£</option>
                <option value="Tarde">Tarde</option>
                <option value="Noite">Noite</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label for="filter-funcao">Fun√ß√£o:</label>
            <select id="filter-funcao" onchange="aplicarFiltros()">
                <option value="todos">Todas as Fun√ß√µes</option>
                <option value="Lider">Lider</option>
                <option value="Ajustador">Ajustador</option>
                <option value="Ajustador/Soldador">Ajustador/Soldador</option>
                <option value="Polidor">Polidor</option>
                <option value="Carregador/Foscador">Carregador/Foscador</option>
                <option value="Vertech">Vertech</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="filter-turma">Turma:</label>
            <select id="filter-turma" onchange="aplicarFiltros()">
                <option value="todos">Todas as Turmas</option>
                <option value="A1">A1</option>
                <option value="A2">A2</option>
                <option value="A3">A3</option>
                <option value="A4">A4</option>
                <option value="B1">B1</option>
                <option value="B2">B2</option>
                <option value="B3">B3</option>
                <option value="B4">B4</option>
                <option value="C1">C1</option>
                <option value="C2">C2</option>
                <option value="C3">C3</option>
                <option value="C4">C4</option>
                <option value="Diaria">Di√°ria</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label for="filter-ferias">Status F√©rias:</label>
            <select id="filter-ferias" onchange="aplicarFiltros()">
                <option value="todos">Todos</option>
                <option value="feriados">De F√©rias</option>
                <option value="proximos">Pr√≥ximas F√©rias</option>
                <option value="atrasadas">F√©rias Atrasadas</option>
                <option value="este-mes">F√©rias Este M√™s</option>
                <option value="nao-informado">N√£o Informado</option>
            </select>
        </div>
        
        <button class="reset-filters" onclick="resetarFiltros()">üîÑ Limpar Filtros</button>
    </div>

    <!-- Campo de Busca -->
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Buscar funcion√°rio por Nome, DRT, Fun√ß√£o, Turma ou F√©rias..." onkeyup="aplicarFiltros()">
        <button onclick="aplicarFiltros()">üîç Buscar</button>
    </div>

    <!-- Bot√£o de Altern√¢ncia de Tema -->
    <button class="theme-toggle" id="theme-toggle">Modo Claro</button>

    <!-- Overlay de Transi√ß√£o -->
    <div class="transition-overlay"></div>

    <!-- Se√ß√£o de Pr√≥ximas F√©rias -->
    <div class="ferias-section">
        <h3 class="ferias-title">‚è∞ Pr√≥ximas F√©rias (Pr√≥ximos 60 dias)</h3>
        <div class="ferias-container" id="proximas-ferias-container">
            <!-- Cards de pr√≥ximas f√©rias ser√£o inseridos aqui via JavaScript -->
        </div>
    </div>

    <!-- Se√ß√£o de Funcion√°rios de F√©rias Atualmente -->
    <div class="ferias-section">
        <h3 class="ferias-title">üèñÔ∏è Funcion√°rios de F√©rias Este M√™s</h3>
        <div class="ferias-container" id="ferias-mes-container">
            <!-- Cards de f√©rias atuais ser√£o inseridos aqui via JavaScript -->
        </div>
    </div>

    <!-- Container dos Turnos -->
    <div id="turnos-container">
        <!-- Turnos ser√£o carregados dinamicamente via JavaScript -->
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
  </html>
